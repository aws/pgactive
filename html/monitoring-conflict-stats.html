<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Monitoring conflicts</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto: bdr-list@2ndquadrant.com"><LINK
REL="HOME"
TITLE="BDR 2.0.6 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="Monitoring"
HREF="monitoring.html"><LINK
REL="PREVIOUS"
TITLE="Monitoring global DDL locks"
HREF="monitoring-ddl-lock.html"><LINK
REL="NEXT"
TITLE="PostgreSQL statistics views"
HREF="monitoring-postgres-stats.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="website-docs.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=ISO-8859-1"><META
NAME="creation"
CONTENT="2023-04-11T13:16:52"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>BDR 2.0.6 Documentation</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="Monitoring global DDL locks"
HREF="monitoring-ddl-lock.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="monitoring.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Chapter 7. Monitoring</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="PostgreSQL statistics views"
HREF="monitoring-postgres-stats.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="MONITORING-CONFLICT-STATS"
>7.5. Monitoring conflicts</A
></H1
><P
>   <A
HREF="conflicts.html"
>Multi-master conflicts</A
> can arise when multiple nodes make changes
   that affect the same tables in ways that can interact with each other.
   The BDR system should be monitored to ensure that conflicts
   are identified and, where possible, applicaiton changes are made to
   eliminate them or make them less frequent.
  </P
><P
>   Not all conflicts are logged to <A
HREF="catalog-bdr-conflict-history.html"
>bdr.bdr_conflict_history</A
>
   even when <A
HREF="bdr-configuration-variables.html#GUC-BDR-LOG-CONFLICTS-TO-TABLE"
>bdr.log_conflicts_to_table</A
> is on. Conflicts
   where BDR cannot proactively detect and handle the conflict (like 3-way
   foreign key conflicts) will result in an <TT
CLASS="LITERAL"
>ERROR</TT
> message
   in the PostgreSQL logs and an increment of
   <A
HREF="catalog-pg-stat-bdr.html"
>bdr.pg_stat_bdr</A
><TT
CLASS="LITERAL"
>.nr_rollbacks</TT
>
   on that node for the connection the conflicting transaction originated from.
  </P
><P
>   If <TT
CLASS="LITERAL"
>pg_stat_bdr.nr_rollbacks</TT
> keeps increasing and a node
   isn't making forward progress, then it's likely there's a divergent conflict
   or other issue that may need administrator action. Check the log files
   for that node for details.
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="monitoring-ddl-lock.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="monitoring-postgres-stats.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Monitoring global DDL locks</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="monitoring.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>PostgreSQL statistics views</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>