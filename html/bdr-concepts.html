<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Concepts</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto: bdr-list@2ndquadrant.com"><LINK
REL="HOME"
TITLE="BDR 2.0.6 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="BDR overview"
HREF="overview.html"><LINK
REL="PREVIOUS"
TITLE="BDR overview"
HREF="overview.html"><LINK
REL="NEXT"
TITLE="Differences between logical (row level) and physical (block level) replication"
HREF="logical-vs-physical.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="website-docs.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=ISO-8859-1"><META
NAME="creation"
CONTENT="2023-04-11T13:16:52"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>BDR 2.0.6 Documentation</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="BDR overview"
HREF="overview.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="overview.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Chapter 1. BDR overview</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="Differences between logical (row level) and physical (block level) replication"
HREF="logical-vs-physical.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="BDR-CONCEPTS"
>1.1. Concepts</A
></H1
><P
>   BDR provides loosely-coupled asynchronous multi-master logical replication
   with mesh topology. This means that you can write to any server and the
   changes will, after they have been committed, be sent row-by-row to all the
   other servers that are part of the same BDR group<A
NAME="AEN57"
HREF="#FTN.AEN57"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
>.
  </P
><P
>   More specifically:
   <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Multi-master</DT
><DD
><P
>       Each database ("node") participating in a BDR group both receives
       changes from other members and can be written to directly by the user.
       This is distinct from hot or warm standby, where only the single master
       server that all others replicate from can be written to.
      </P
><P
>       You don't have to write to all the masters, it's possible to leave
       all nodes except one read-only, or just direct writes to only one
       master. However, if you just want one-way replication look into <A
HREF="http://2ndquadrant.com/pglogical"
TARGET="_top"
>pglogical</A
>, which
       is more flexible.
      </P
><P
>       If you're interested in BDR's multi-master features it's important to
       understand some of the concepts behind multi-master, both in general and
       as BDR implements it.  Application developers
       <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>must</I
></SPAN
> be aware that applications may need changes
       for multi-master BDR and cannot be written exactly as if they are
       talking to a standalone or single-master system. See <A
HREF="weak-coupled-multimaster.html"
>BDR: Weakly coupled multi-master replication</A
>.
      </P
></DD
><DT
>asynchronous</DT
><DD
><P
>       Changes made on one BDR node are not replicated to other nodes before
       they are committed locally. As a result the data is not exactly the
       same on all nodes at any given time; some nodes will have data that
       has not yet arrived at other nodes. PostgreSQL's block-based replication
       solutions default to asynchronous replication as well.
      </P
><P
>	   Support for synchronous writes may be added to a future BDR release and
	   <A
HREF="node-management-synchronous.html"
>support for 1-safe
	   synchronous replication is implemented.</A
>
      </P
><P
>       When combined with multi-master, asynchronous replication is often
       called an "eventually consistent" architecture. At any given time
       the data can look different when viewed from different nodes, but
       over time the nodes sync with each other. If writes stop then after
       a while all nodes will be the same. In BDR this means that
       <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>foreign key constraints may be temporarily violated</I
></SPAN
>
       as data replicates from multiple nodes.
      </P
></DD
><DT
>loosely-coupled</DT
><DD
><P
>       Nodes in BDR are loosely-coupled because there is not much inter-node
       co-ordination traffic. There is no global transaction manager, no global
       lock manager, etc. Locks are node-local and there's no inter-node row
       or relation locking; the only inter-node locking is done for
       <A
HREF="ddl-replication.html"
>schema changes</A
>.
      </P
><P
>       This means nodes run more independently and are highly tolerant of
       network interruptions and partitions. But it also means that <A
HREF="weak-coupled-multimaster.html"
>replication conflicts</A
> may occur.
      </P
></DD
><DT
>logical</DT
><DD
><P
>       Logical (row-based) replication is replication using individual row values. It
       contrasts with physical (block-based) replication where changes to data blocks
       are sent. Logical replication is at a different level - it's a lot like
       the difference between sending a set of files and sending the hard drive
       the files are on. Logical replication has both advantages and disadvantages
       compared to physical replication; see <A
HREF="logical-vs-physical.html"
>Differences between logical and physical replication</A
>.
      </P
><P
>       The logical replication performed by BDR is low-level and requires that each
       table have exactly the same structure down to details like dropped columns.
       If you need a more flexible model for continuous ETL, OLAP data collection
       etc, look at <A
HREF="http://2ndquadrant.com/pglogical"
TARGET="_top"
>pglogical</A
>.
      </P
></DD
><DT
>replication</DT
><DD
><P
>       Replication is the process of copying data from one place to another. In
       BDR refers to the fact that BDR is not a shared-storage architecture;
       each node has its own copy of the database, including all relevant
       indexes etc. Nodes can satisfy queries without needing to communicate
       with other nodes, but must also have enough storage space to hold all the
       data in the database.
      </P
></DD
><DT
>mesh topology</DT
><DD
><P
>       BDR is structured around a <A
HREF="technotes-mesh.html"
>mesh network</A
>
       where every node connects to every other node and all nodes exchange data
       directly with each other. There is no forwarding.
      </P
></DD
></DL
></DIV
><P>
  </P
><P
>   BDR is built on the <A
HREF="http://www.postgresql.org/docs/current/static/logicaldecoding.html"
TARGET="_top"
>   logical decoding</A
> features developed by the BDR project and added
   to PostgreSQL. It also relies on other core PostgreSQL features that
   were added with BDR in mind, like background workers.
  </P
><P
>   Because BDR needed some features that didn't make it into the PostgreSQL 9.4
   release, it needs a modified PostgreSQL 9.4 to run. See <A
HREF="install-requirements.html"
>BDR requirements</A
>.
  </P
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN57"
HREF="bdr-concepts.html#AEN57"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>We'd say
   "cluster", but PostgreSQL has historically used that term for a different
   and confusing purpose, to mean a particular PostgreSQL instance's collection
   of databases.</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="overview.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="logical-vs-physical.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>BDR overview</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="overview.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Differences between logical (row level) and physical (block level) replication</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>