<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>How conflicts happen</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto: bdr-list@2ndquadrant.com"><LINK
REL="HOME"
TITLE="BDR 2.0.6 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="Multi-master conflicts"
HREF="conflicts.html"><LINK
REL="PREVIOUS"
TITLE="Multi-master conflicts"
HREF="conflicts.html"><LINK
REL="NEXT"
TITLE="Types of conflict"
HREF="conflicts-types.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="website-docs.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=ISO-8859-1"><META
NAME="creation"
CONTENT="2023-04-11T13:16:52"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>BDR 2.0.6 Documentation</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="Multi-master conflicts"
HREF="conflicts.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="conflicts.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Chapter 9. Multi-master conflicts</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="Types of conflict"
HREF="conflicts-types.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="CONFLICTS-HOW"
>9.1. How conflicts happen</A
></H1
><P
>   Inter-node conflicts arise as a result of sequences of events that could not
   happen if all the involved transactions happened concurrently on the same
   node. Because the nodes only exchange changes after transactions commit, each
   transaction is individually valid on the node it committed on but would not
   be valid if run on another node that has done other work in the mean time.
   Since <SPAN
CLASS="PRODUCTNAME"
>BDR</SPAN
> apply essentially replays the transaction on the other nodes, the
   replay operation can fail if there is a conflict between a transaction being
   applied and a transaction that was committed on the receiving node.
  </P
><P
>   The reason most conflicts can't happen when all transactions run on a single
   node is that PostgreSQL has inter-transaction communication mechanisms
   to prevent it - <TT
CLASS="LITERAL"
>UNIQUE</TT
> indexes,
   <TT
CLASS="LITERAL"
>SEQUENCE</TT
>s, row and relation locking,
   <TT
CLASS="LITERAL"
>SERIALIZABLE</TT
> dependency tracking, etc. All of these
   mechanisms are ways to communicate between transactions to prevent
   undesirable concurrency issues.
  </P
><P
>   <SPAN
CLASS="PRODUCTNAME"
>BDR</SPAN
> does not have a distributed transaction manager or lock manager.
   That's part of why it performs well with latency and network partitions. As
   a result, so <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>transactions on different nodes execute entirely in
   isolation from each other</I
></SPAN
>. Despite the usual perception that
   "more isolation is good" you actually need to reduce isolation to prevent
   conflicts.
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="conflicts.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="conflicts-types.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Multi-master conflicts</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="conflicts.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Types of conflict</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>